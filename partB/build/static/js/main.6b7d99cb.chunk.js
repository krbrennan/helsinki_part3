(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(17),o=t.n(r),i=(t(8),t(18)),u=t(3),a=t(4),s=t.n(a),l="http://localhost:3001/",j=function(){return s.a.get(l).then((function(e){return e})),s.a.get(l).then((function(e){return e.data}))},f=function(e){return s.a.post("http://localhost:3001/api/persons",e)},b=function(e){return s.a.delete("http://localhost:3001/api/persons/".concat(e.id))},d=function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},h=t(0),m=function(e){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("p",{children:[e.info.name,"    ",e.info.number," "]},e.info.name),Object(h.jsx)("button",{onClick:function(){return e.delete(e.info.name)},children:"Delete"})]})},O=function(e){return 0===e.filtered.length?Object(h.jsx)("div",{children:Object(h.jsx)("ul",{children:e.people.map((function(n,t){return Object(h.jsx)(m,{delete:e.deletePerson,info:n})}))})}):Object(h.jsx)("div",{children:Object(h.jsx)("ul",{children:e.filtered.map((function(n,t){return Object(h.jsx)("li",{children:Object(h.jsx)(m,{delete:e.deletePerson,info:n})})}))})})},p=function(e){return Object(h.jsxs)("form",{onSubmit:e.submitSearch,children:["Lookup a name:  ",Object(h.jsx)("input",{onChange:e.onTextChange})]})},x=function(e){return Object(h.jsxs)("form",{onSubmit:e.submitName,children:[Object(h.jsx)("h2",{children:"Add a new Contact"}),Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{onChange:e.handleNameChange,value:e.name})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{onChange:e.handleNumberChange,value:e.number})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){return console.log(e),""==e.message?Object(h.jsx)("div",{className:"errorDiv"}):Object(h.jsx)("div",{className:"errorDiv",children:Object(h.jsx)("h4",{className:"errorMessage",children:e.message})})},v=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),a=Object(u.a)(o,2),s=a[0],l=a[1],m=Object(c.useState)(""),v=Object(u.a)(m,2),C=v[0],N=v[1],S=Object(c.useState)(""),k=Object(u.a)(S,2),T=k[0],w=k[1],D=Object(c.useState)([]),P=Object(u.a)(D,2),F=P[0],L=P[1],y=Object(c.useState)(""),E=Object(u.a)(y,2),I=E[0],A=E[1],B=function(e,n){console.log(e),A("new"==e?"Added ".concat(n):"".concat(n,"'s number changed!"))};return Object(c.useEffect)((function(){j().then((function(e){return r(e)}))}),[]),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"top-div",children:[Object(h.jsx)("h1",{className:"title",children:"Phonebook"}),Object(h.jsx)(g,{message:I})]}),Object(h.jsx)(p,{submitSearch:function(e){e.preventDefault(),w(T);var n=t.filter((function(e){return e.name.toLowerCase().includes(T)}));L(n)},onTextChange:function(e){w(e.target.value)}}),Object(h.jsx)(x,{submitName:function(e){e.preventDefault();var n={name:s,number:C};!function(e){var n=!1;return t.forEach((function(t){t.name.includes(e)&&(n=!0)})),n}(s)?(f(n).then((function(e){r((function(n){return[].concat(Object(i.a)(n),[e.data])}))})),B("new",n.name),setTimeout((function(){A("")}),5e3),N(""),l(""),j().then((function(e){return r(e)}))):(!function(e,n){var c=t.filter((function(n){if(n.name==e)return n}));d(c[0].id,n).then((function(e){r(t.map((function(n){return n.id!==e.id?n:e})))})),j().then((function(e){return r(e)}))}(s,n),B("update",n.name),setTimeout((function(){A("")}),5e3),j().then((function(e){return r(e)})))},handleNameChange:function(e){l(e.target.value)},handleNumberChange:function(e){N(e.target.value)},number:C,name:s}),Object(h.jsx)("h2",{children:"Numbers:"}),Object(h.jsx)(O,{people:t,deletePerson:function(e){var n=t.filter((function(n){return n.name==e}));console.log(n[0]),b(n[0]).then((function(e){console.log(e),r(e.data)})).catch((function(n){404==n.response.status&&(A("Information for ".concat(e," has already been removed from the server")),setTimeout((function(){A("")}),5e3),j().then((function(e){return r(e)})))}))},filtered:F}),"..."]})},C=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,43)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,o=n.getLCP,i=n.getTTFB;t(e),c(e),r(e),o(e),i(e)}))};o.a.render(Object(h.jsx)(v,{}),document.getElementById("root")),C()},8:function(e,n,t){}},[[42,1,2]]]);
//# sourceMappingURL=main.6b7d99cb.chunk.js.map